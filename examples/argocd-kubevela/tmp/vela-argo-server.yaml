spec:
  template:
    spec:
      initContainers:
        - name: kubevela
          image: nginx:1.21.6
          command:
            - bash
            - "-c"
            - |
              #!/usr/bin/env bash
              set -eo pipefail
              curl -fsSl https://kubevela.io/script/install.sh | bash -s 1.6.4
          env:
            - name: VELA_INSTALL_DIR
              value: /custom-tools
          resources:
            limits:
              cpu: 50m
              memory: 64Mi
            requests:
              cpu: 10m
              memory: 32Mi
          volumeMounts:
            - name: custom-tools
              mountPath: /custom-tools
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          imagePullPolicy: IfNotPresent
      volumes:
        - name: custom-tools
          emptyDir: {}
